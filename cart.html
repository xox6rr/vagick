<!-- Updated Cart Page with 10% Coupon Code --><!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cart - Vagick</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
  <div class="max-w-4xl mx-auto px-4 py-10">
    <h1 class="text-3xl font-bold mb-8 text-center">Your Cart</h1>
    <div id="cart-items" class="space-y-6"></div><div class="mt-10 bg-white p-6 rounded shadow">
  <div class="mb-4">
    <label for="coupon" class="block font-semibold mb-2">Have a coupon?</label>
    <div class="flex">
      <input id="coupon" type="text" placeholder="Enter code (e.g., BIGD10)" class="flex-1 px-4 py-2 border rounded-l">
      <button onclick="applyCoupon()" class="bg-purple-600 text-white px-4 py-2 rounded-r hover:bg-purple-700">Apply</button>
    </div>
    <p id="coupon-msg" class="text-green-600 mt-2 hidden"></p>
  </div>
  <div class="flex justify-between text-xl font-bold">
    <span>Total:</span>
    <span id="total">₹0.00</span>
  </div>
  <button class="mt-6 w-full bg-purple-600 text-white py-3 rounded hover:bg-purple-700">Buy Now</button>
</div>

  </div>  <script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let discount = 0;

    function renderCart() {
      const container = document.getElementById('cart-items');
      container.innerHTML = '';
      let subtotal = 0;

      cart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        subtotal += itemTotal;

        const div = document.createElement('div');
        div.className = 'flex justify-between items-center bg-white p-4 rounded shadow';
        div.innerHTML = `
          <div>
            <h2 class="text-lg font-semibold">${item.name}</h2>
            <p>₹${item.price.toFixed(2)} x ${item.quantity}</p>
          </div>
          <div class="flex items-center space-x-2">
            <button onclick="updateQty(${index}, -1)" class="bg-gray-200 px-2 rounded">-</button>
            <span>${item.quantity}</span>
            <button onclick="updateQty(${index}, 1)" class="bg-gray-200 px-2 rounded">+</button>
            <button onclick="removeItem(${index})" class="text-red-500 ml-4">Remove</button>
          </div>
        `;
        container.appendChild(div);
      });

      const totalElem = document.getElementById('total');
      const discounted = subtotal * (1 - discount);
      totalElem.textContent = `₹${discounted.toFixed(2)}`;
    }

    function updateQty(index, delta) {
      cart[index].quantity += delta;
      if (cart[index].quantity <= 0) cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    }

    function removeItem(index) {
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    }

    function applyCoupon() {
      const code = document.getElementById('coupon').value.trim().toUpperCase();
      const msg = document.getElementById('coupon-msg');
      if (code === 'BIGD10') {
        discount = 0.10;
        msg.textContent = '10% discount applied!';
        msg.classList.remove('hidden');
        msg.classList.add('text-green-600');
      } else {
        discount = 0;
        msg.textContent = 'Invalid coupon code.';
        msg.classList.remove('hidden');
        msg.classList.add('text-red-600');
      }
      renderCart();
    }

    renderCart();
  </script></body>
</html>
